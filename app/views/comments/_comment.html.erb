<div class="panel panel-default comment-body">
  <div class="panel-body ">
    <h4><%= comment.comment %></h4>
    <p>Posted by <%= comment.user.email %> <%= time_ago_in_words(comment.created_at) %></p>
    <% if can? :update, comment %>
      <%= link_to "Edit", edit_post_comment_path(comment.commentable, comment),class: "btn btn-info"%>
    <% end %>
    <% if can? :destroy, comment %>
    <%= link_to "Delete", [comment.commentable, comment], method: :delete, data: { confirm: "Are you sure?" },class: "btn btn-danger"%>
    <% end %>
    
    <%= link_to like_post_comment_path(comment.commentable, comment), class: "like", method: :put do%>
      <button type="button" class="btn btn-info" aria-label="Left Align">
        <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
        <span class="badge"><%= comment.get_upvotes.size %></span>
      </button>
    <% end %>
    
    <%= link_to dislike_post_comment_path(comment.commentable, comment), class: "like", method: :put do%>
      <button type="button" class="btn btn-info" aria-label="Left Align">
        <span class="glyphicon glyphicon-thumbs-down glyphicon-align-center" aria-hidden="true"></span>
        <span class="badge"><%= comment.get_downvotes.size %></span>
      </button>
    <% end %>
    
    <h4>Comment Replies</h4>
    <%= render partial: 'comments/reply', collection: comment.comments %>

    <%= bootstrap_form_for [comment, Comment.new] do |f| %> 
      <%= f.text_area :comment,placeholder: "Add a Reply"%>
      <%= f.submit "Reply" %>
    <% end %>
    
  </div>
</div>
